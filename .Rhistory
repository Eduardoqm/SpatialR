library(devtools)
document()
?polycent
imports(terra)
install("SpatialR")
rlang::last_trace()
rlang::last_trace(drop = FALSE)
install(C:/Users/Workshop/Documents/Research/Programming/SpatialR)
install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
library(SpatialR)
usethis::use_testthat()
usethis::use_testthat()
usethis::use_test()
rlang::last_trace()
usethis::use_test(polycent())
usethis::use_test(polycent(polygon))
testthat (>= 3.0.0)
usethis::use_test(polycent())
usethis::use_test(polycent
)
usethis::use_test(polycent)
usethis::use_test("polycent")
library(terra)
br = vect("G:/My Drive/Postdoc_UFRA/Geodata/Vectors/Brazil_States.shp")
polycent(br)
install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
library(SpatialR)
br = vect("G:/My Drive/Postdoc_UFRA/Geodata/Vectors/Brazil_States.shp")
polycent(br)
install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
library(SpatialR)
br = vect("G:/My Drive/Postdoc_UFRA/Geodata/Vectors/Brazil_States.shp")
polycent(br)
library(SpatialR)
polycent(br)
SpatialR::polycent(br)
usethis::use_testthat()
usethis::use_test()
rlang::last_trace()
detach("package:terra", unload = TRUE)
library(SpatialR)
br = vect("G:/My Drive/Postdoc_UFRA/Geodata/Vectors/Brazil_States.shp")
library(terra)
library(SpatialR)
br = vect("G:/My Drive/Postdoc_UFRA/Geodata/Vectors/Brazil_States.shp")
SpatialR::polycent(br)
polycent <- function(x){
N <- length(x)  #Number of polygons
Centroids.bb <- data.frame(matrix(NA, N, 2, dimnames = list(NULL, c("long", "lat"))))
for(i in 1:N){
bb <- bbox(x@polygons[[i]]) #Bounding box of polygon
Centroids.bb[i,] <- c(
0.5 * (bb[1,1] + bb[1,2]),
0.5 * (bb[2,1] + bb[2,2]))  #Compute centroids
}
return(Centroids.bb)
}
document()
library(devtools)
document()
library(SpatialR)
br = vect("G:/My Drive/Postdoc_UFRA/Geodata/Vectors/Brazil_States.shp")
SpatialR::polycent(br)
install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
library(SpatialR)
br = vect("G:/My Drive/Postdoc_UFRA/Geodata/Vectors/Brazil_States.shp")
SpatialR::polycent(br)
document()
install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
library(SpatialR)
br = vect("G:/My Drive/Postdoc_UFRA/Geodata/Vectors/Brazil_States.shp")
polycent(br)
install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
library(SpatialR)
br = vect("G:/My Drive/Postdoc_UFRA/Geodata/Vectors/Brazil_States.shp")
polycent(br)
document()
rm(list = c("polycent"))
document()
install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
library(SpatialR)
br = vect("G:/My Drive/Postdoc_UFRA/Geodata/Vectors/Brazil_States.shp")
polycent(br)
document()
install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
library(SpatialR)
br = vect("G:/My Drive/Postdoc_UFRA/Geodata/Vectors/Brazil_States.shp")
polycent(br)
document()
install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
library(SpatialR)
br = vect("G:/My Drive/Postdoc_UFRA/Geodata/Vectors/Brazil_States.shp")
polycent(br)
document()
install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
library(SpatialR)
br = vect("G:/My Drive/Postdoc_UFRA/Geodata/Vectors/Brazil_States.shp")
polycent(br)
document()
install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
library(SpatialR)
br = vect("G:/My Drive/Postdoc_UFRA/Geodata/Vectors/Brazil_States.shp")
polycent(br)
remove.packages("SpatialR")
install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
unlink("C:/Users/Workshop/AppData/Local/R/win-library/4.3/00LOCK-*", recursive = TRUE)
devtools::install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
library(devtools)
devtools::install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
library(SpatialR)
br = vect("G:/My Drive/Postdoc_UFRA/Geodata/Vectors/Brazil_States.shp")
library(terra)
library(SpatialR)
br = vect("G:/My Drive/Postdoc_UFRA/Geodata/Vectors/Brazil_States.shp")
polycent(br)
View(br)
plot(br)
am = vect("G:/My Drive/Postdoc_UFRA/Papers/Amazonia_validation (Marques et al)/Shapes/Amazonia_full_V2.shp")
polycent(am)
document()
document()
devtools::install("C:/Users/Workshop/Documents/Research/Programming/SpatialR")
library(terra)
library(SpatialR)
br = vect("G:/My Drive/Postdoc_UFRA/Geodata/Vectors/Brazil_States.shp")
am = vect("G:/My Drive/Postdoc_UFRA/Papers/Amazonia_validation (Marques et al)/Shapes/Amazonia_full_V2.shp")
tst = c(1,2,565,343,2324)
polycent(br)
polycent(am)
library(devtools)
document()
#Histogram of distance
#Eduardo Q Marques 16-09-2024
library(tidyverse)
#Load data ---------------------------------------------------------------------
setwd("G:/My Drive/Postdoc_UFRA/Papers/Nascentes_FBDS (Silverio et al)/Modelos_nascentes")
dir()
df=readxl::read_excel("Nascentes_riacho_fundo_barra.xlsx")
head(df)
#Separate Negatives and positives values ---------------------------------------
dfn = df %>%
filter(dif_elev < 0)
#dfn$mindist_m = 0 - dfn$mindist_m
dfp = df %>%
filter(dif_elev >= 0)
dfp$mindist_m = 0 - dfp$mindist_m
df2 = rbind(dfp, dfn)
#Calculating percentage ranges -------------------------------------------------
#General
quantile(df$mindist_m, probs = 0.9) #909.43
quantile(df$mindist_m, probs = 0.8) #573.69
quantile(df$mindist_m, probs = 0.7) #385.67
#Positive
quantile(dfp$mindist_m, probs = 0.9) #831.15
quantile(dfp$mindist_m, probs = 0.8) #416.98
quantile(dfp$mindist_m, probs = 0.7) #229.87
#Negative
quantile(dfn$mindist_m, probs = 0.9) #-35.57
quantile(dfn$mindist_m, probs = 0.8) #-52.05
quantile(dfn$mindist_m, probs = 0.7) #-107.72
#Graphics ----------------------------------------------------------------------
#General
ggplot(df, aes(x = mindist_m))+
geom_density(fill = "black", alpha = 0.30)+
geom_vline(xintercept = 0,linetype = "dashed", col = "black", size = 1)+
geom_vline(xintercept = 385.67,linetype = "dashed", col = "black", size = 1)+
geom_vline(xintercept = 573.69,linetype = "dashed", col = "black", size = 1)+
geom_vline(xintercept = 909.43,linetype = "dashed", col = "black", size = 1)+
annotate(geom = "text", x = 192.83, y = 0.0010, col = "black", label = "385.67 m
(70%)")+
annotate(geom = "text", x = 470, y = 0.0010, col = "black", label = "573.69 m
(80%)")+
annotate(geom = "text", x = 750, y = 0.0010, col = "black", label = "909.43 m
(90%)")+
labs(x = "Distance difference (m)", y = NULL)+
theme_minimal()
#Positive and negative
df500 = df %>% filter(mindist_m <= 500)
ggplot(df2, aes(x = mindist_m))+
geom_density(fill = "royalblue", alpha = 0.30)+
geom_vline(xintercept = 0,linetype = "dashed", col = "darkgray", size = 1)+
annotate(geom = "text", x = -800, y = 0.00075, col = "darkgray", fontface = 2,
label = "27.27%
less than zero")+
annotate(geom = "text", x = 800, y = 0.00075, col = "darkgray", fontface = 2,
label = "72.72%
higher than zero")+
geom_vline(xintercept = -500,linetype = "dashed", col = "black", size = 1)+
geom_vline(xintercept = 500,linetype = "dashed", col = "black", size = 1)+
annotate(geom = "text", x = 0, y = 0.0001, col = "darkblue", fontface = 2,
label = "77.27%
with 500 m of difference")+
labs(x = "Distance difference (m)", y = NULL)+
theme_minimal()
plot1 = ggplot(df2, aes(x = mindist_m))+
geom_density(fill = "royalblue", alpha = 0.30)+
geom_vline(xintercept = 0,linetype = "dashed", col = "darkgray", size = 1)+
annotate(geom = "text", x = -800, y = 0.00075, col = "darkgray", fontface = 2,
label = "27.27%
less than zero")+
annotate(geom = "text", x = 800, y = 0.00075, col = "darkgray", fontface = 2,
label = "72.72%
higher than zero")+
geom_vline(xintercept = -500,linetype = "dashed", col = "black", size = 1)+
geom_vline(xintercept = 500,linetype = "dashed", col = "black", size = 1)+
annotate(geom = "text", x = 0, y = 0.0001, col = "darkblue", fontface = 2,
label = "77.27%
with 500 m of difference")+
labs(x = "Distance difference (m)", y = NULL)+
theme_minimal(); plot1
ggsave(filename = "Histogram_distance.png", plot = plot1,
width = 15, height = 12, units = "cm", dpi = 300)
ggsave(filename = "Histogram_distance.png", plot = plot1,
width = 15, height = 10, units = "cm", dpi = 300)
ggsave(filename = "Histogram_distance.png", plot = plot1,
width = 17, height = 10, units = "cm", dpi = 300)
ggsave(filename = "Histogram_distance.tiff", plot = plot1,
width = 17, height = 10, units = "cm", dpi = 300)
skewness(df2$mindist_m)
library(moments)
install.packages("moments")
library(moments)
skewness(df2$mindist_m)
kurtosis(df2$mindist_m)
